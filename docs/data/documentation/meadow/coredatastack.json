{"seeAlsoSections":[{"title":"Metadata local persistency using Core Data","identifiers":["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/PersistentContainers","doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/ManualPlacements","doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/PersistentContainerObserver"],"generated":true}],"schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"CoreDataStack"}],"title":"CoreDataStack","roleHeading":"Class","role":"symbol","symbolKind":"class","externalID":"s:6Meadow13CoreDataStackC","modules":[{"name":"Meadow"}],"navigatorTitle":[{"kind":"identifier","text":"CoreDataStack"}]},"abstract":[{"type":"text","text":"Creates the Core Data stack. Supports Cloud and Local configurations,"},{"type":"text","text":" "},{"type":"text","text":"manual disabling of the CloudKit syncing and more."}],"sections":[],"identifier":{"url":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack","interfaceLanguage":"swift"},"relationshipsSections":[{"identifiers":["doc:\/\/io.wildland.meadow.alpha\/7Combine16ObservableObjectP"],"kind":"relationships","title":"Conforms To","type":"conformsTo"}],"hierarchy":{"paths":[["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow","doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/GraphPersistency"]]},"topicSections":[{"title":"Initializers","identifiers":["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/init(enableCloudKit:isTestingMode:testingSubdirUUID:)"]},{"title":"Instance Properties","identifiers":["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/cloudKitContainerName","doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/container","doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/storeName"]},{"title":"Instance Methods","identifiers":["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/fetchPersistentHistory(after:)","doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/newTaskContext(name:)","doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/purgeAllPersistentHistory()"]},{"title":"Type Properties","identifiers":["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/managedObjectModel"]},{"title":"Type Methods","identifiers":["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/deleteStore()"]},{"title":"Default Implementations","identifiers":["doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/ObservableObject-Implementations"],"generated":true}],"variants":[{"paths":["\/documentation\/meadow\/coredatastack"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"symbol","primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"CoreDataStack"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are two stores used:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The Synced store – one which can be synced to the cloud (unless syncing is disabled)."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The Local store – which is never to be synced to the cloud. Currently this store is used"},{"type":"text","text":" "},{"type":"text","text":"for storing content caches for the containers."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Additionally, the stores comes in two variants:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The Release variant"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The Debug variant (store names suffixed by "},{"type":"codeVoice","code":"-DEBUG"},{"type":"text","text":")"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To allow for separation of DBs between the Debug and Release builds, which is useful"},{"type":"text","text":" "},{"type":"text","text":"for developers not to mix their “real” Meadow DB with one they use for adhoc testing while"},{"type":"text","text":" "},{"type":"text","text":"developing the app."}]}]}],"references":{"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/fetchPersistentHistory(after:)":{"role":"symbol","title":"fetchPersistentHistory(after:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"fetchPersistentHistory"},{"kind":"text","text":"("},{"kind":"externalParam","text":"after"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"NSPersistentHistoryToken","preciseIdentifier":"c:objc(cs)NSPersistentHistoryToken"},{"kind":"text","text":"?) -> ["},{"kind":"typeIdentifier","text":"NSPersistentHistoryTransaction","preciseIdentifier":"c:objc(cs)NSPersistentHistoryTransaction"},{"kind":"text","text":"]"}],"abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/fetchPersistentHistory(after:)","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/fetchpersistenthistory(after:)"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/managedObjectModel":{"role":"symbol","title":"managedObjectModel","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"managedObjectModel"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"NSManagedObjectModel","preciseIdentifier":"c:objc(cs)NSManagedObjectModel"}],"abstract":[{"type":"text","text":"We retrieve manually the Core Data Model, so that we don’t need to"},{"type":"text","text":" "},{"type":"text","text":"worry about Model vs "},{"type":"codeVoice","code":"storeName"},{"type":"text","text":" names mismatches."}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/managedObjectModel","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/managedobjectmodel"},"doc://io.wildland.meadow.alpha/documentation/Meadow/ManualPlacements":{"role":"symbol","title":"ManualPlacements","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ManualPlacements"}],"abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/ManualPlacements","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ManualPlacements"}],"url":"\/documentation\/meadow\/manualplacements"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/newTaskContext(name:)":{"role":"symbol","title":"newTaskContext(name:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"newTaskContext"},{"kind":"text","text":"("},{"kind":"externalParam","text":"name"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"NSManagedObjectContext","preciseIdentifier":"c:objc(cs)NSManagedObjectContext"}],"abstract":[{"type":"text","text":"Creates and configures a private queue context."}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/newTaskContext(name:)","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/newtaskcontext(name:)"},"doc://io.wildland.meadow.alpha/documentation/Meadow/PersistentContainers":{"role":"symbol","title":"PersistentContainers","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"PersistentContainers"}],"abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/PersistentContainers","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PersistentContainers"}],"url":"\/documentation\/meadow\/persistentcontainers"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/init(enableCloudKit:isTestingMode:testingSubdirUUID:)":{"role":"symbol","title":"init(enableCloudKit:isTestingMode:testingSubdirUUID:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"enableCloudKit"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"isTestingMode"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"testingSubdirUUID"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UUID","preciseIdentifier":"s:10Foundation4UUIDV"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Initialises the whole CoreData Stack."}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/init(enableCloudKit:isTestingMode:testingSubdirUUID:)","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/init(enablecloudkit:istestingmode:testingsubdiruuid:)"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack":{"role":"symbol","title":"CoreDataStack","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"CoreDataStack"}],"abstract":[{"type":"text","text":"Creates the Core Data stack. Supports Cloud and Local configurations,"},{"type":"text","text":" "},{"type":"text","text":"manual disabling of the CloudKit syncing and more."}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CoreDataStack"}],"url":"\/documentation\/meadow\/coredatastack"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/cloudKitContainerName":{"role":"symbol","title":"cloudKitContainerName","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"cloudKitContainerName"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/cloudKitContainerName","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/cloudkitcontainername"},"doc://io.wildland.meadow.alpha/7Combine16ObservableObjectP":{"type":"unresolvable","title":"Combine.ObservableObject","identifier":"doc:\/\/io.wildland.meadow.alpha\/7Combine16ObservableObjectP"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/container":{"role":"symbol","title":"container","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"container"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CoreDataContainer","preciseIdentifier":"c:@M@Meadow@objc(cs)CoreDataContainer"}],"abstract":[{"type":"text","text":"The Core Data container used for accessing the underlying SQLite stores."}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/container","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/container"},"doc://io.wildland.meadow.alpha/documentation/Meadow/GraphPersistency":{"role":"collectionGroup","title":"Metadata Persistency and Cloud syncing","abstract":[{"type":"text","text":"This document discusses how local and cloud persistence is implemented in Meadow."}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/GraphPersistency","kind":"article","type":"topic","url":"\/documentation\/meadow\/graphpersistency"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/purgeAllPersistentHistory()":{"role":"symbol","title":"purgeAllPersistentHistory()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"purgeAllPersistentHistory"},{"kind":"text","text":"()"}],"abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/purgeAllPersistentHistory()","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/purgeallpersistenthistory()"},"doc://io.wildland.meadow.alpha/documentation/Meadow":{"role":"collection","title":"Meadow","abstract":[{"type":"text","text":"Welcome to the the Meadow developer’s documentation."}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow","kind":"symbol","type":"topic","url":"\/documentation\/meadow"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/ObservableObject-Implementations":{"role":"collectionGroup","title":"ObservableObject Implementations","abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/ObservableObject-Implementations","kind":"article","type":"topic","url":"\/documentation\/meadow\/coredatastack\/observableobject-implementations"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/storeName":{"role":"symbol","title":"storeName","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"storeName"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/storeName","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/storename"},"doc://io.wildland.meadow.alpha/documentation/Meadow/CoreDataStack/deleteStore()":{"role":"symbol","title":"deleteStore()","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"deleteStore"},{"kind":"text","text":"()"}],"abstract":[],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/CoreDataStack\/deleteStore()","kind":"symbol","type":"topic","url":"\/documentation\/meadow\/coredatastack\/deletestore()"},"doc://io.wildland.meadow.alpha/documentation/Meadow/PersistentContainerObserver":{"role":"symbol","title":"PersistentContainerObserver","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"PersistentContainerObserver"}],"abstract":[{"type":"text","text":"Create an instance of this class to observe a specific Container.id"},{"type":"text","text":" "},{"type":"text","text":"for any underlying changes to its store representation"},{"type":"text","text":" "},{"type":"text","text":"(e.g. as a result of cloud syncing events)"},{"type":"text","text":" "},{"type":"text","text":"NOTE: it currently only monitors events resulting from CloudKit syncing"},{"type":"text","text":" "},{"type":"text","text":"– see addObserver comments in the init()"}],"identifier":"doc:\/\/io.wildland.meadow.alpha\/documentation\/Meadow\/PersistentContainerObserver","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PersistentContainerObserver"}],"url":"\/documentation\/meadow\/persistentcontainerobserver"}}}